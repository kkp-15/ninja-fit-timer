<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç­‹ãƒˆãƒ¬ï¼†ãƒ€ã‚¤ã‚¨ãƒƒãƒˆã‚¿ã‚¤ãƒãƒ¼ï½œãƒãƒ³ã‚ºãƒ•ãƒªãƒ¼å¯¾å¿œã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«</title>

  <!-- SEO -->
  <meta name="description" content="ç­‹ãƒˆãƒ¬ãƒ»HIITãƒ»æœ‰é…¸ç´ é‹å‹•ã«ä½¿ãˆã‚‹ã€ç­‹ãƒˆãƒ¬ï¼†ãƒ€ã‚¤ã‚¨ãƒƒãƒˆã‚¿ã‚¤ãƒãƒ¼ã€ã€‚ãƒãƒ³ã‚ºãƒ•ãƒªãƒ¼æ“ä½œã€éŸ³å£°ã‚¬ã‚¤ãƒ‰ã€ã‚¹ãƒªãƒ¼ãƒ—é˜²æ­¢ã§â€œç—©ã›ã‚‹ãƒˆãƒ¬â€ã‚’æ¥½ã«ç¶™ç¶šã€‚" />
  <meta name="keywords" content="ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«,ç­‹ãƒˆãƒ¬,ãƒ€ã‚¤ã‚¨ãƒƒãƒˆ,HIIT,æœ‰é…¸ç´ ,ã‚¿ã‚¤ãƒãƒ¼,ãƒãƒ³ã‚ºãƒ•ãƒªãƒ¼,è„‚è‚ªç‡ƒç„¼" />

  <!-- OGP -->
  <meta property="og:title" content="ç­‹ãƒˆãƒ¬ï¼†ãƒ€ã‚¤ã‚¨ãƒƒãƒˆã‚¿ã‚¤ãƒãƒ¼ï½œãƒãƒ³ã‚ºãƒ•ãƒªãƒ¼å¯¾å¿œã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«" />
  <meta property="og:description" content="ç­‹ãƒˆãƒ¬/ãƒ€ã‚¤ã‚¨ãƒƒãƒˆ/HIITå¯¾å¿œã€‚éŸ³å£°æ“ä½œãƒ»ã‚¹ãƒ¯ã‚¤ãƒ—æ“ä½œãƒ»ã‚¹ãƒªãƒ¼ãƒ—é˜²æ­¢å¯¾å¿œã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã‚¿ã‚¤ãƒãƒ¼ã€‚" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://fit.kkpwebninja.com/" />
  <meta property="og:image" content="https://fit.kkpwebninja.com/image/card.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="canonical" href="https://fit.kkpwebninja.com/" />
  <link rel="icon" href="favicon.ico" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2LM85GJN0L"></script>
  <script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-2LM85GJN0L');</script>

  <style>
    :root{--fg:#111;--muted:#666;--accent:#0a84ff;--bg:#fff;--card:#f6f7f8}
    @media (prefers-color-scheme: dark){:root{--fg:#eee;--muted:#aaa;--accent:#4da3ff;--bg:#121212;--card:#1e1e1e}}
    *{box-sizing:border-box}body{font-family:system-ui,-apple-system,"Noto Sans JP",sans-serif;margin:0;background:var(--bg);color:var(--fg);min-height:100dvh;display:grid;place-items:center;padding:16px}
    .app{width:min(680px,100%);background:var(--card);border-radius:16px;box-shadow:0 8px 28px rgba(0,0,0,.12);overflow:hidden}
    header,footer{padding:12px 16px}header h1{margin:0;font-size:20px}header p{margin:6px 0 0;color:var(--muted);font-size:13px}
    main{padding:16px}.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input{width:100%;padding:12px 10px;font-size:18px;border-radius:12px;background:#fff0;color:var(--fg);border:1px solid #0000;outline:1px solid #0003}
    .big{font-size:80px;font-weight:800;text-align:center;margin:8px 0}.phase{font-size:14px;color:var(--muted);text-align:center;margin-top:-6px}
    .rounds{font-size:14px;text-align:center;margin:8px 0 14px}.row{display:flex;gap:10px;justify-content:center;margin:10px 0 4px}
    button{flex:1;padding:12px 10px;border-radius:12px;font-size:16px;font-weight:700;cursor:pointer;border:none}
    .start{background:var(--accent);color:#fff}.pause{background:#ffd60a}.reset{background:#e5e5ea}.secondary{background:#dfe2e6}
    .switches{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0}.chip{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:999px;background:#e9ecef;font-size:14px}
    .chip input{width:auto;accent-color:var(--accent)}.tapzone{margin-top:10px;border-radius:16px;border:2px dashed #0003;padding:14px;text-align:center;color:var(--muted)}
    .hint{font-size:12px;color:var(--muted);text-align:center;margin-top:8px}footer{font-size:12px;color:var(--muted);text-align:center}
    .locked input{pointer-events:none;opacity:.6}#footerLinks{margin-top:10px;text-align:center;font-size:12px}#footerLinks a{color:inherit}
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <h1>ç­‹ãƒˆãƒ¬ï¼†ãƒ€ã‚¤ã‚¨ãƒƒãƒˆã‚¿ã‚¤ãƒãƒ¼</h1>
      <p>ãƒãƒ³ã‚ºãƒ•ãƒªãƒ¼æ“ä½œ Ã— éŸ³å£°ã‚¬ã‚¤ãƒ‰ Ã— ã‚¹ãƒªãƒ¼ãƒ—é˜²æ­¢ï¼ˆHIIT/æœ‰é…¸ç´ /ç­‹ãƒˆãƒ¬å¯¾å¿œï¼‰</p>
    </header>

    <main id="touchArea">
      <div class="grid">
        <div><label for="work">ä½œæ¥­(ç§’)</label><input id="work" type="number" min="1" value="30" /></div>
        <div><label for="rest">ä¼‘æ†©(ç§’)</label><input id="rest" type="number" min="1" value="15" /></div>
        <div><label for="rounds">å›æ•°</label><input id="rounds" type="number" min="1" value="8" /></div>
      </div>

      <div class="switches">
        <label class="chip"><input type="checkbox" id="countIn" checked /> ã‚«ã‚¦ãƒ³ãƒˆã‚¤ãƒ³</label>
        <label class="chip"><input type="checkbox" id="voiceGuide" checked /> éŸ³å£°ã‚¬ã‚¤ãƒ‰</label>
        <label class="chip"><input type="checkbox" id="lockUI" /> è¨­å®šãƒ­ãƒƒã‚¯</label>
        <button class="secondary" id="btnVoice">éŸ³å£°ON</button>
      </div>

      <div class="big" id="display">00:30</div>
      <div class="phase" id="phase">å¾…æ©Ÿä¸­ï¼ˆã‚¿ãƒƒãƒ—ã§é–‹å§‹ï¼‰</div>
      <div class="rounds"><span id="count">0</span>/<span id="total">8</span> ãƒ©ã‚¦ãƒ³ãƒ‰</div>

      <div class="row">
        <button class="start" id="btnStart">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
        <button class="pause" id="btnPause" disabled>ä¸€æ™‚åœæ­¢</button>
        <button class="reset" id="btnReset" disabled>ãƒªã‚»ãƒƒãƒˆ</button>
      </div>

      <div class="tapzone">ç”»é¢ã‚¿ãƒƒãƒ—ï¼é–‹å§‹/ä¸€æ™‚åœæ­¢ï½œã‚¹ãƒ¯ã‚¤ãƒ—å³ï¼æ¬¡ã¸ï½œã‚¹ãƒ¯ã‚¤ãƒ—å·¦ï¼ã¾ãˆã¸</div>
      <div class="hint">éŸ³å£°ã‚³ãƒãƒ³ãƒ‰ä¾‹ï¼šã€Œã‚¹ã‚¿ãƒ¼ãƒˆ / ãƒãƒ¼ã‚º / ãƒªã‚»ãƒƒãƒˆ / æ¬¡ã¸ / ã¾ãˆ / æ®‹ã‚Šæ™‚é–“ã€</div>
    </main>

    <footer>
      ã‚¹ãƒªãƒ¼ãƒ—é˜²æ­¢ãƒ»éŸ³å£°ã¯æœ€åˆã®æ“ä½œå¾Œã«æœ‰åŠ¹åŒ–ã•ã‚Œã¾ã™ã€‚
      <div id="footerLinks">
        X <a href="https://x.com/kkp_webninja" target="_blank">@kkp_webninja</a><br>
        ğŸ¯ <a href="https://kkpwebninja.com" target="_blank">webå¿è€…ã®æœ¬ä¸¸</a>
      </div>
    </footer>
  </div>

  <script>
// JavaScript æœ¬ä½“ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§æŒ¿å…¥äºˆå®šã ã£ãŸå†…å®¹ã‚’ã“ã“ã§ãƒ•ãƒ«å±•é–‹ï¼‰

let timer, count = 0, total = 8, phase = 'work', running = false, remaining = 0, wakeLock = null;
const workEl = document.getElementById('work'), restEl = document.getElementById('rest'), roundsEl = document.getElementById('rounds');
const displayEl = document.getElementById('display'), countEl = document.getElementById('count'), totalEl = document.getElementById('total'), phaseEl = document.getElementById('phase');
const startBtn = document.getElementById('btnStart'), pauseBtn = document.getElementById('btnPause'), resetBtn = document.getElementById('btnReset');
const voiceBtn = document.getElementById('btnVoice');

function speak(text) {
  if (!document.getElementById('voiceGuide').checked) return;
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = 'ja-JP';
  speechSynthesis.speak(utter);
}

function format(t) {
  const m = Math.floor(t / 60), s = t % 60;
  return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
}

function startPhase() {
  total = parseInt(roundsEl.value);
  countEl.textContent = count;
  totalEl.textContent = total;
  phaseEl.textContent = phase === 'work' ? 'ä½œæ¥­ä¸­' : 'ä¼‘æ†©ä¸­';
  const seconds = phase === 'work' ? parseInt(workEl.value) : parseInt(restEl.value);
  remaining = seconds;
  displayEl.textContent = format(remaining);
  speak(`${phase === 'work' ? 'ä½œæ¥­' : 'ä¼‘æ†©'}é–‹å§‹`);
  if (document.getElementById('countIn').checked) {
    speak('3'); setTimeout(() => speak('2'), 1000); setTimeout(() => speak('1'), 2000);
    setTimeout(runTimer, 3000);
  } else runTimer();
}

function runTimer() {
  running = true;
  startBtn.disabled = true; pauseBtn.disabled = false; resetBtn.disabled = false;
  timer = setInterval(() => {
    remaining--;
    displayEl.textContent = format(remaining);
    if (remaining === 10) speak('æ®‹ã‚Š10ç§’');
    if (remaining <= 0) {
      clearInterval(timer);
      running = false;
      if (phase === 'work') count++;
      if (count >= total && phase === 'work') {
        speak('çµ‚äº†ï¼ãŠç–²ã‚Œã•ã¾ã§ã—ãŸ');
        reset(); return;
      }
      phase = phase === 'work' ? 'rest' : 'work';
      startPhase();
    }
  }, 1000);
}

function pause() {
  clearInterval(timer); running = false;
  startBtn.disabled = false; pauseBtn.disabled = true;
  speak('ä¸€æ™‚åœæ­¢');
}

function reset() {
  clearInterval(timer); running = false; count = 0; phase = 'work';
  displayEl.textContent = format(parseInt(workEl.value));
  phaseEl.textContent = 'å¾…æ©Ÿä¸­ï¼ˆã‚¿ãƒƒãƒ—ã§é–‹å§‹ï¼‰';
  countEl.textContent = 0; totalEl.textContent = roundsEl.value;
  startBtn.disabled = false; pauseBtn.disabled = true; resetBtn.disabled = true;
}

startBtn.onclick = () => { if (!running) startPhase(); };
pauseBtn.onclick = pause;
resetBtn.onclick = reset;

document.getElementById('lockUI').onchange = e => {
  document.querySelector('.grid').classList.toggle('locked', e.target.checked);
};

voiceBtn.onclick = () => {
  const recog = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
  recog.lang = 'ja-JP'; recog.continuous = true;
  recog.onresult = e => {
    const cmd = e.results[e.results.length - 1][0].transcript;
    if (cmd.includes('ã‚¹ã‚¿ãƒ¼ãƒˆ')) startPhase();
    else if (cmd.includes('ãƒãƒ¼ã‚º') || cmd.includes('ä¸€æ™‚åœæ­¢')) pause();
    else if (cmd.includes('ãƒªã‚»ãƒƒãƒˆ')) reset();
    else if (cmd.includes('æ¬¡')) { phase = 'rest'; startPhase(); }
    else if (cmd.includes('å‰') || cmd.includes('ã¾ãˆ')) { phase = 'work'; startPhase(); }
    else if (cmd.includes('æ®‹ã‚Š')) speak(`${remaining}ç§’ã§ã™`);
  };
  recog.start();
  speak('éŸ³å£°èªè­˜ã‚’é–‹å§‹ã—ã¾ã—ãŸ');
};

document.getElementById('touchArea').addEventListener('click', () => {
  if (running) pause(); else startPhase();
});

let touchStartX = 0;
document.getElementById('touchArea').addEventListener('touchstart', e => {
  touchStartX = e.touches[0].clientX;
});
document.getElementById('touchArea').addEventListener('touchend', e => {
  const dx = e.changedTouches[0].clientX - touchStartX;
  if (Math.abs(dx) > 50) {
    if (dx > 0) { phase = 'rest'; startPhase(); }
    else { phase = 'work'; startPhase(); }
  }
});

// Wake Lockï¼ˆã‚¹ãƒªãƒ¼ãƒ—é˜²æ­¢ï¼‰
if ('wakeLock' in navigator) {
  document.addEventListener('click', async () => {
    try {
      wakeLock = await navigator.wakeLock.request('screen');
    } catch (e) { console.log(e); }
  }, { once: true });
}
  </script>
</body>
</html>
